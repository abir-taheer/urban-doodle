"use strict";let useGoogleAnalytics="true"===$("meta[name=use-google-analytics]").attr("content"),isSignedIn="true"===$("meta[name=signed-in]").attr("content"),gtagTrackingID=useGoogleAnalytics?$("meta[name=gtag-tracking-id]").attr("content"):"";function initializeItems(e,t){let a=document.querySelectorAll(e);for(let e=0;e<a.length;e++)t.attachTo(a[e])}function initializeMDC(e=!1){initializeItems(".mdc-button, .mdc-tab__ripple, .mdc-card__primary-action",mdc.ripple.MDCRipple),initializeItems(".mdc-text-field",mdc.textField.MDCTextField),initializeItems(".mdc-tab-bar",mdc.tabBar.MDCTabBar),initializeItems(".mdc-list",mdc.list.MDCList),initializeItems(".mdc-chip-set",mdc.chips.MDCChipSet),initializeItems(".mdc-select",mdc.select.MDCSelect),e?window.mdc.autoInit(document,()=>{}):mdc.autoInit()}function onSignIn(e){let t=e.getAuthResponse().id_token;$.post("/auth.php",{token:t},function(e){let t=JSON.parse(e);if("success"===t.status)useGoogleAnalytics&&gtag("event","login",{method:"Google"}),addSnackbarQueue("You have been successfully signed in"),window.location.reload();else{let e=0;for(;e<t.message.length;)addSnackbarQueue(t.message[e]),e++;playSnackbarQueue()}})}let manDrawTrig=!1;function changePage(e=null){let t=document.getElementById("variable-region"),a=document.querySelector(".page-loader");$(a).removeClass("mdc-linear-progress--closed"),$(t).fadeOut(1),$(t).find("link").prop("disabled",!0),$(t).empty(),null!==e&&history.pushState({},null,e);let n=document.querySelector(".drawer-pages-list").childNodes,o=window.location.pathname.split("/")[1];for(let e=0;e<n.length;e++){let t=n[e];$(t).data("page")==="/"+o?$(t).addClass("mdc-list-item--activated"):$(t).removeClass("mdc-list-item--activated")}$.get("/load.php?page="+window.location.pathname,function(e,a,n){$(t).html(e);let o=new Event("content_loaded");setTimeout(()=>{document.body.dispatchEvent(o)},1e3),null==n.getResponseHeader("X-Page-Redirect")?("true"===n.getResponseHeader("X-Fetch-New-Sources")&&addSources(n),null!=n.getResponseHeader("X-Load-Sub")&&loadSubPage()):changePage(n.getResponseHeader("X-Page-Redirect"))}).fail(function(){$(t).fadeIn(),$(a).addClass("mdc-linear-progress--closed")}).then(function(){$(t).ready(function(){$(a).addClass("mdc-linear-progress--closed"),$(t).fadeIn(1)})}),useGoogleAnalytics&&gtag("config",gtagTrackingID,{page_path:window.location.pathname}),playSnackbarQueue()}function addSources(e){let t,a,n=document.getElementById("variable-region"),o=JSON.parse(e.getResponseHeader("X-New-Sources")),r=e.getResponseHeader("X-Nonce");for(t in o.script){let e=document.createElement("script");e.setAttribute("nonce",r),e.setAttribute("src",o.script[t]),n.appendChild(e)}for(a in o.css){let e=document.createElement("link");e.setAttribute("nonce",r),e.setAttribute("rel","stylesheet"),e.setAttribute("href",o.css[t]),n.appendChild(e)}}function openPopup(e,t){let a=window.open(e,"Share "+t,"height=400,width=550");return window.focus&&a.focus(),a}function loadSubPage(e=null){null!==e&&history.pushState({},null,e),$.get("/subload.php?page="+window.location.pathname,(e,t,a)=>{null===a.getResponseHeader("X-Page-Redirect")?($("#sub-variable-region").html(e),"true"===a.getResponseHeader("X-Fetch-New-Sources")&&addSources(a)):changePage(a.getResponseHeader("X-Page-Redirect"))})}$(".obs").on("click",e=>{drawer.open=!1,$(e.currentTarget).addClass("fear"),$("#variable-region").fadeIn()}),$(document).ready(()=>{let e=document.querySelector(".drawer-pages-list"),t=JSON.parse(atob(e.getAttribute("data-menu-items")));for(let a=0;a<t.length;a++){if("*"!==t[a].session&&t[a].session!==$("meta[name=signed-in]").attr("content"))continue;let n=document.createElement("a");n.classList.add("mdc-list-item"),n.classList.add("change-page"),n.classList.add("clickable"),n.setAttribute("data-mdc-auto-init","MDCRipple"),n.setAttribute("data-page",t[a].page);let o=document.createElement("a");o.classList.add("material-icons"),o.classList.add("mdc-list-item__graphic"),o.innerHTML=t[a].icon,n.appendChild(o);let r=document.createElement("span");r.classList.add("mdc-list-item__text"),r.innerHTML=t[a].text,n.appendChild(r),e.appendChild(n)}changePage(),playSnackbarQueue()}),initializeMDC();const drawer=new mdc.drawer.MDCDrawer(document.querySelector(".mdc-drawer")),shareBox=new mdc.dialog.MDCDialog(document.querySelector(".share-dialog")),confirmDialog=new mdc.dialog.MDCDialog(document.querySelector(".confirm-dialog"));let snackbar=new mdc.snackbar.MDCSnackbar(document.querySelector(".mdc-snackbar"));function sendForm(){}function receiveMessage(e){if(e.origin===window.location.origin&&"printClose"===e.data){let e=setInterval(()=>{initial_load&&(clearInterval(e),print(),close())},100)}}window.innerWidth>1250&&(drawer.open=!0),window.onpopstate=function(){changePage()},$(document.body).on("click",".change-page",e=>{changePage($(e.currentTarget).data("page")),window.innerWidth<=1250&&(drawer.open=!1,$(".obs").addClass("fear"))}).on("click",".share-card",e=>{let t=$(e.currentTarget).data("share-url");$(".share-url").find(".url-content").val(t),shareBox.open()}).on("click",".copy-social",e=>{document.querySelector(".url-content").select(),document.execCommand("copy"),$(e.currentTarget).html("Copied!"),setTimeout(()=>{$(e.currentTarget).html("Copy")},500)}).on("click",".submit-form",e=>{let t=e.currentTarget;t.setAttribute("disabled",!0);let a=t.parentElement.parentElement,n=$(a).find("form");$.post($(n).data("action"),$(n).serialize(),(e,a,o)=>{let r=JSON.parse(e);for(let e=0;e<r.message.length;e++)addSnackbarQueue(r.message[e]);if("success"===r.status)switch($(n).data("callback")){case"reload":changePage();break;case"change-page":changePage($(n).data("reload-page"))}else t.removeAttribute("disabled"),playSnackbarQueue()})}).on("click",".sign-out",()=>{location.replace("/signout.php")}).on("click",".sub-page-change",e=>{loadSubPage(e.currentTarget.getAttribute("data-page"))}).on("click",".menu-trigger",()=>{let e=$("#variable-region"),t=$(".obs");window.innerWidth<1250?(drawer.open?e.fadeIn():e.fadeOut(1),drawer.open?t.addClass("fear"):t.removeClass("fear")):e.fadeIn(),drawer.open=!drawer.open,!manDrawTrig&&window.innerWidth>1250&&(manDrawTrig=!0)}).on("click",".social",e=>{let t=e.currentTarget,a=$(t),n=$(".url-content").val(),o=[["so-facebook","https://www.facebook.com/sharer/sharer.php?u=","Facebook"],["so-twitter","https://twitter.com/intent/tweet?url=","Twitter"],["so-linkedin","https://www.linkedin.com/shareArticle?mini=true&url=","LinkedIn"],["so-pinterest","https://www.pinterest.com/pin/create/button/?url=","Pinterest"]];for(let e=0;e<o.length;e++)if(a.hasClass(o[e][0]))return openPopup(o[e][1]+encodeURIComponent(n),o[e][2]),!0;if(a.hasClass("so-envelope"))return window.location.href="mailto:?body="+encodeURIComponent(n),!0;if(a.hasClass("so-print")){var r=openPopup(n);let e=setInterval(function(){"complete"===r.document.readyState&&(clearInterval(e),setTimeout(()=>{r.postMessage("printClose",n)},1200))},100);return!0}return console.log("Unexpected case: "+t),!1}),window.addEventListener("message",receiveMessage,!1);let initial_load=!1;function showConfirmation(e=document.createElement("template"),t=(()=>{}),a=(()=>{})){let n=e.content.cloneNode(!0),o=document.getElementById("confirm-dialog-content");o.innerHTML="",o.appendChild(n),confirmDialog.open(),$(".confirm-dialog .mdc-dialog__button").on("click",e=>{"yes"===e.currentTarget.getAttribute("data-mdc-dialog-action")?t():a(),$(".confirm-dialog .mdc-dialog__button").off()})}function playSnackbarQueue(){try{let e=JSON.parse(localStorage.getItem("snackbar"));e.length>0&&(snackbar.labelText=e[0],$(".mdc-snackbar__action").addClass("fear"),e.shift(),snackbar.open(),localStorage.setItem("snackbar",JSON.stringify(e)))}catch(e){localStorage.setItem("snackbar","[]")}}function addSnackbarQueue(e){try{if("object"!=typeof JSON.parse(localStorage.getItem("snackbar")))throw new Error("Snackbar not setup")}catch(e){localStorage.setItem("snackbar","[]")}let t=JSON.parse(localStorage.getItem("snackbar"));t.push(e),localStorage.setItem("snackbar",JSON.stringify(t))}document.body.addEventListener("content_loaded",()=>{initial_load=!0}),$("#variable-region").on("DOMSubtreeModified",()=>{initializeMDC(!0)}),isSignedIn||(navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&!navigator.userAgent.match(/(FB|Messenger)/)?document.pagehide=(()=>{gapi.auth2.getAuthInstance().disconnect()}):window.onbeforeunload=(()=>{gapi.auth2.getAuthInstance().disconnect()})),confirmDialog.listen("MDCDialog:opened",()=>{initializeMDC(!0)}),$(window).resize(()=>{window.innerWidth<=1250?drawer.open&&(drawer.open=!1):(manDrawTrig||(drawer.open=!0),$("#variable-region").fadeIn())}),snackbar.listen("MDCSnackbar:closed",()=>{playSnackbarQueue()});let pageLoadedTime=new Date,pageLoadOffset=pageLoadedTime.getTime()-pageLoadStart.getTime(),serverTime=new Date(atob($("meta[name=server-utc-time]").attr("content")));serverTime.setTime(serverTime.getTime()+pageLoadOffset);let short_months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long_months=["January","February","March","April","May","June","July","August","September","October","November","December"],short_days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],long_days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function getDateEnding(e){return 10<e&&e<14?"th":e%10==1?"st":e%10==2?"nd":e%10==3?"rd":"th"}let countdowns=setInterval(()=>{let e=(new Date).getTime()-pageLoadedTime.getTime(),t=new Date(serverTime.getTime()+e),a=document.getElementsByClassName("js-timer");for(let e=0;e<a.length;e++){let n=a[e];switch($(n).data("timer-type")){case"countdown":let e=atob($(n).data("count-down-date")),a=new Date(e).getTime()-t.getTime(),o="",r=Math.floor(a/864e5),i=Math.floor(a%864e5/36e5),s=Math.floor(a%36e5/6e4),c=Math.floor(a%6e4/1e3);o=r>0?r+"d ":o,o=(o=a>36e5?o+i+"h ":o)+s+"m ",o=a<864e5?o+c+"s":o,$(n).hasClass("js-timer__warning")&&a<parseInt($(n).data("count-down-warning"))&&!$(n).hasClass("red-txt")&&$(n).addClass("red-txt"),a<0&&(o="0s",$(n).removeClass("js-timer")),n.innerHTML=o;break;case"current":let l=$(n).data("time-format"),d={d:t.getDate().toString().padStart(2,"0"),D:short_days[t.getDay()],j:t.getDate(),l:long_days[t.getDay()],S:getDateEnding(t.getDate()),w:t.getDay()+1,F:long_months[t.getMonth()],m:(t.getMonth()+1).toString().padStart(2,"0"),M:short_months[t.getMonth()],n:t.getMonth()+1,Y:t.getFullYear(),y:t.getFullYear()%100,a:t.getHours()>=12?"pm":"am",h:(t.getHours()%12).toString().padStart(2,"0"),H:t.getHours().toString().padStart(2,"0"),i:t.getMinutes().toString().padStart(2,"0"),s:t.getSeconds().toString().padStart(2,"0")},g="",u=!1;for(let e=0;e<l.length;e++)u||"\\"!==l[e]?(g+=l[e]in d&&!u?d[l[e]]:l[e],u=!1):u=!0;$(n).html(g)}}},1e3);